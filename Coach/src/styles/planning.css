/* ===== Planner dark theme (scoped to .planning-page) ===== */
.planning-page{
    --bg-950: #0b1220;
    --bg-900: #0f172a;
    --ink-100: #e6eefb;
    --ink-300: #a8b4c8;
    --panel-border: rgba(255,255,255,.06);
    --panel-glass: rgba(17,24,39,.70);
    --accent: #0ea5e9;
  
    min-height: 100svh;
    padding: clamp(16px, 2vw, 24px);
    color: var(--ink-100);
    background:
      radial-gradient(900px 600px at 75% 20%, rgba(56,189,248,.20), transparent 60%),
      radial-gradient(800px 500px at 20% 80%, rgba(99,102,241,.16), transparent 60%),
      linear-gradient(180deg, var(--bg-900), var(--bg-950));
  }
  
  .planning-grid{
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1.2fr 2.6fr 1.2fr; /* ~20 / 60 / 20 */
    gap: clamp(12px, 2vw, 20px);
  }
  
  /* glassy panels */
  .panel-dark{
    background: var(--panel-glass);
    border: 1px solid var(--panel-border);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    box-shadow: 0 18px 40px rgba(0,0,0,.35);
    padding: clamp(14px, 1.8vw, 18px);
  }
  .panel-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
  .panel-dark h2{ margin:0; font-family: var(--font-display); letter-spacing:.2px; }
  
  /* left week panel */
  .week-meta{ display:grid; gap:10px; margin:8px 0 12px; }
  .week-range{ font-weight:600; }
  .week-nav{ display:flex; gap:8px; }
  .ghost{
    background: transparent; color: var(--ink-100);
    border: 1px solid var(--panel-border); border-radius: 10px; padding: 6px 10px; cursor: pointer;
  }
  .legend{ list-style:none; padding:0; margin:8px 0 12px; display:grid; gap:8px; font-size:14px; }
  .dot{ display:inline-block; width:10px; height:10px; border-radius:999px; margin-right:8px; vertical-align:middle; }
  .dot.done{ background:#22c55e; }   /* green */
  .dot.plan{ background:#0ea5e9; }   /* blue */
  .dot.rest{ background:#f59e0b; }   /* amber */
  .back-link{ display:inline-block; margin-top:8px; color:#9ecdf9; }
  
  /* center calendar */
  .calendar-grid{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap: clamp(8px, 1vw, 12px);
  }
  .day-col{
    background: rgba(255,255,255,.02);
    border: 1px solid var(--panel-border);
    border-radius: 12px;
    padding: 10px;
    min-height: 220px;
  }
  .day-head{ display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:8px; }
  .day-name{ font-weight:700; }
  .muted{ color: var(--ink-300); }
  
  .workout-card{
    border-radius: 12px;
    padding: 10px;
    margin-bottom: 8px;
    border: 1px solid var(--panel-border);
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  }
  .workout-card .title{ font-weight:700; }
  .workout-card.done   { box-shadow: inset 0 0 0 2px rgba(34,197,94,.25); }
  .workout-card.planned{ box-shadow: inset 0 0 0 2px rgba(14,165,233,.25); }
  
  /* right chat panel */
  .coach-panel{ display:flex; flex-direction:column; }
  .coach-avatar{
    display:grid; place-items:center;
    border:1px dashed var(--panel-border); border-radius:12px;
    background: rgba(255,255,255,.02);
    height: 160px; margin-bottom:10px;
  }
  .coach-avatar img{ max-width:100%; height:100%; object-fit:contain; }
  
  .chat-log{
    display:flex; flex-direction:column; gap:8px;
    overflow:auto; max-height: 340px; padding-right:2px; margin-bottom:10px;
  }
  .msg{
    max-width: 85%;
    padding: 10px 12px; border-radius: 12px; border:1px solid var(--panel-border);
    background: rgba(255,255,255,.06);
  }
  .msg.user{ margin-left:auto; background: rgba(14,165,233,.20); }
  .msg.coach{ margin-right:auto; }
  
  .chat-input{ display:flex; gap:8px; }
  .chat-input input{
    flex:1; padding:10px 12px; border-radius:12px; color:var(--ink-100);
    background: rgba(255,255,255,.06); border:1px solid var(--panel-border);
  }
  
  /* buttons inside planner */
  .planning-page .btn{
    background: linear-gradient(180deg, #0fb2ef 0%, #0ea5e9 35%, #0597d3 100%);
    border: 1px solid rgba(255,255,255,.9);
    color:#fff; border-radius:9999px; padding:10px 16px; font-weight:600;
    box-shadow: 0 10px 20px rgba(14,165,233,.25);
    cursor:pointer; transition: transform .1s ease, box-shadow .2s ease, background .2s ease;
  }
  .planning-page .btn:hover{ transform: translateY(-2px); box-shadow: 0 14px 28px rgba(14,165,233,.35); }
  .planning-page .btn--blue{ background: linear-gradient(180deg, #38bdf8, #0ea5e9); }
  
  /* responsive stacking */
  @media (max-width: 1100px){
    .planning-grid{ grid-template-columns: 1fr; }
    .calendar-grid{ grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 640px){
    .calendar-grid{ grid-template-columns: 1fr; }
  }

  .coach-avatar {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,.10);
    box-shadow: 0 12px 28px rgba(0,0,0,.35);
    display: flex;
    align-items: flex-end;            /* sit the coach on the “floor” */
    justify-content: center;
    padding: 12px 16px 0;
    height: clamp(180px, 32vh, 280px); /* <= controls overall space */
  }
  
  /* Placeholder state (only if you want it when no image) */
  .coach-avatar.placeholder {
    background:
      repeating-conic-gradient(#eef2f7 0 25%, #f8fafc 0 50%) 0 / 16px 16px; /* checker */
    color: rgba(15,23,42,.55);
  }
  
  /* When an image is present, use a subtle glass card and NO checkerboard */
  .coach-avatar.has-image {
    background:
      radial-gradient(600px circle at 70% -30%, rgba(14,165,233,.14), transparent 40%),
      linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  }
  
  /* The coach image itself */
  .coach-avatar img {
    height: 88%;          /* dial this (80–92%) for size */
    width: auto;
    object-fit: contain;
    display: block;
    filter: drop-shadow(0 12px 24px rgba(14,165,233,.35));
  }
  
  /* Hide the helper text when an image is present */
  .coach-avatar.has-image .muted { display: none; }
  
  /* Keep the helper text positioned if you ever show the placeholder */
  .coach-avatar .muted {
    position: absolute;
    left: 12px;
    bottom: 10px;
    font-size: 12px;
    opacity: .75;
    pointer-events: none;
  }
  